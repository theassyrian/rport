(self.webpackChunkrport_site=self.webpackChunkrport_site||[]).push([[821],{3415:(e,s,n)=>{"use strict";n.r(s),n.d(s,{data:()=>t});const t={key:"v-f13cd882",path:"/docs/no14-scripts.html",title:"Scripts",lang:"en-DE",frontmatter:{},excerpt:"",headers:[{level:2,title:"Scripts management",slug:"scripts-management",children:[{level:3,title:"Create",slug:"create",children:[]},{level:3,title:"Params:",slug:"params",children:[]},{level:3,title:"Update",slug:"update",children:[]},{level:3,title:"List scripts",slug:"list-scripts",children:[]},{level:3,title:"Sort",slug:"sort",children:[]},{level:3,title:"Filter",slug:"filter",children:[]},{level:3,title:"Delete",slug:"delete",children:[]},{level:3,title:"Show a single script",slug:"show-a-single-script",children:[]}]},{level:2,title:"Scripts execution",slug:"scripts-execution",children:[{level:3,title:"Script execution via REST interface",slug:"script-execution-via-rest-interface",children:[]},{level:3,title:"Customizing an interpreter",slug:"customizing-an-interpreter",children:[]},{level:3,title:"Script execution via websocket interface",slug:"script-execution-via-websocket-interface",children:[]},{level:3,title:"Execution of taco scripts",slug:"execution-of-taco-scripts",children:[]}]}],filePathRelative:"docs/no14-scripts.md"}},7296:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>D});var t=n(6252);const a=(0,t.Wm)("h1",{id:"scripts",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#scripts","aria-hidden":"true"},"#"),(0,t.Uk)(" Scripts")],-1),r=(0,t.Wm)("p",null,"Rport allows to store your scripts for later reuse, so you can share them with your teammates and to have access to them from anywhere.",-1),i=(0,t.Wm)("h2",{id:"scripts-management",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#scripts-management","aria-hidden":"true"},"#"),(0,t.Uk)(" Scripts management")],-1),o=(0,t.Uk)("You can manage script with the "),c={href:"https://petstore.swagger.io/?url=https://raw.githubusercontent.com/cloudradar-monitoring/rport/master/api-doc.yml#/Scripts",target:"_blank",rel:"noopener noreferrer"},l=(0,t.Uk)("REST API"),p=(0,t.Uk)("."),u=(0,t.uE)('<p>The <code>/library/scripts</code> endpoints allow you to create, update, delete and list scripts.</p><h3 id="create" tabindex="-1"><a class="header-anchor" href="#create" aria-hidden="true">#</a> Create</h3><p>To create a script, provide following input:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X POST &#39;http://localhost:3000/api/v1/library/scripts&#39; \\\n-u admin:foobaz \\\n-H &#39;Content-Type: application/json&#39; \\\n--data-raw &#39;{\n\t&quot;name&quot;: &quot;current_directory&quot;,\n\t&quot;interpreter&quot;: &quot;/bin/sh&quot;,\n\t&quot;is_sudo&quot;: true,\n\t&quot;cwd&quot;: &quot;/root&quot;,\n\t&quot;script&quot;: &quot;pwd&quot;\n}&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="params" tabindex="-1"><a class="header-anchor" href="#params" aria-hidden="true">#</a> Params:</h3><ul><li><em>name</em> any text to identify the script</li><li><em>interpreter</em> script syntax interpreter which is used for execution, e.g. <code>sh</code>, <code>cmd.exe</code>, <code>powershell</code>, <code>tacoscript</code>, default values: <code>sh</code> (under Linux) and <code>cmd.exe</code> (under Windows). See more about interpreter option below.</li><li><em>sudo</em> true or false if this script should be executed under a sudo user</li><li><em>cwd</em> an optional directory where the script will be executed</li><li><em>script</em> the text of the script to execute</li></ul><h3 id="update" tabindex="-1"><a class="header-anchor" href="#update" aria-hidden="true">#</a> Update</h3><p>You should know the script unique id to update it e.g. <code>4943d682-7874-4f7a-999c-b4ff5493fc3f</code>. You can use scripts list API to find ID of a corresponding script.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X PUT &#39;http://localhost:3000/api/v1/library/scripts/4943d682-7874-4f7a-999c-b4ff5493fc3f&#39; \\\n-u admin:foobaz \\\n-H &#39;Content-Type: application/json&#39; \\\n--data-raw &#39;{\n\t&quot;name&quot;: &quot;current_directory&quot;,\n\t&quot;interpreter&quot;: &quot;/bin/sh&quot;,\n\t&quot;is_sudo&quot;: true,\n\t&quot;cwd&quot;: &quot;/root&quot;,\n\t&quot;script&quot;: &quot;pwd&quot;\n}&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Please note, that you should provide all parameters as partial updates are not supported.</p><h3 id="list-scripts" tabindex="-1"><a class="header-anchor" href="#list-scripts" aria-hidden="true">#</a> List scripts</h3><p>This API allows to list all stored scripts.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X GET &#39;http://localhost:3000/api/v1/library/scripts&#39; \\\n-u admin:foobaz \\\n-H &#39;Content-Type: application/json&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The response will be</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{\n    &quot;data&quot;: [\n        {\n            &quot;id&quot;: &quot;4943d682-7874-4f7a-999c-b4ff5493fc3f&quot;,\n            &quot;name&quot;: &quot;current directory&quot;,\n            &quot;created_by&quot;: &quot;admin&quot;,\n            &quot;created_at&quot;: &quot;2021-05-18T09:30:27+03:00&quot;,\n            &quot;interpreter&quot;: &quot;/bin/bash&quot;,\n            &quot;is_sudo&quot;: true,\n            &quot;cwd&quot;: &quot;/root&quot;,\n            &quot;script&quot;: &quot;pwd&quot;,\n        },\n        {\n            &quot;id&quot;: &quot;4943d682-7874-4f7a-999c-12r2343241&quot;,\n            &quot;name&quot;: &quot;hostname&quot;,\n            &quot;created_by&quot;: &quot;admin&quot;,\n            &quot;created_at&quot;: &quot;2021-05-19T19:31:57+03:00&quot;,\n            &quot;interpreter&quot;: &quot;/bin/sh&quot;,\n            &quot;is_sudo&quot;: false,\n            &quot;cwd&quot;: &quot;/root&quot;,\n            &quot;script&quot;: &quot;hostname&quot;,\n        },\n    ]\n}\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="sort" tabindex="-1"><a class="header-anchor" href="#sort" aria-hidden="true">#</a> Sort</h3><p>You can sort entries by <code>id</code>,<code>name</code>,<code>created_by</code>,<code>created_at</code> fields:</p><p>e.g. <code>http://localhost:3000/api/v1/library/scripts?sort=created_at</code> - gives you scripts sorted by date of creation in ascending order.</p><p>To change the sorting order by adding <code>-</code> to a field name. e.g. <code>http://localhost:3000/api/v1/library/scripts?sort=-created_at</code> - gives you scripts sorted by date of creation where the newest entries will be listed first.</p><p>You can sort by multiple fields and any combination of sort directions: e.g. <code>http://localhost:3000/api/v1/library/scripts?sort=created_at&amp;sort=-name</code> - gives you entries sorted by creation date. If multiple entries are created at the same time, they will be sorted by name in descending order.</p><h3 id="filter" tabindex="-1"><a class="header-anchor" href="#filter" aria-hidden="true">#</a> Filter</h3><p>You can filter entries by <code>id</code>,<code>name</code>,<code>created_by</code>,<code>created_at</code> fields:</p><p><code>http://localhost:3000/api/v1/library/scripts?filter[name]=current_directory</code> will list scripts with the name <code>current_directory</code>.</p><p>You can combine filters for multiple fields: <code>http://localhost:3000/api/v1/library/scripts?filter[name]=current_directory&amp;filter[created_by]=admin</code> - gives you a list of scripts with name <code>current_directory</code> and created by <code>admin</code>.</p><p>You can also specify multiple filter values e.g. <code>http://localhost:3000/api/v1/library/scripts?filter[name]=script1,scriptX</code> - gives you scripts <code>script1</code> or <code>scriptX</code>.</p><p>You can also combine both sort and filter queries in a single request:</p><p><code>http://localhost:3000/api/v1/library/scripts?sort=created_at&amp;filter[created_by]=admin</code> - gives you scripts created by <code>admin</code> sorted by <code>created_at</code> in order of creation.</p><h3 id="delete" tabindex="-1"><a class="header-anchor" href="#delete" aria-hidden="true">#</a> Delete</h3><p>You should know the script unique id to delete it e.g. <code>4943d682-7874-4f7a-999c-b4ff5493fc3f</code>. You can use scripts list API to find ID of a corresponding script.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -u admin:foobaz -X DELETE &#39;http://localhost:3000/api/v1/library/scripts/4943d682-7874-4f7a-999c-b4ff5493fc3f&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="show-a-single-script" tabindex="-1"><a class="header-anchor" href="#show-a-single-script" aria-hidden="true">#</a> Show a single script</h3><p>To show a single script you need to know it&#39;s id e.g. <code>4943d682-7874-4f7a-999c-b4ff5493fc3f</code>. You can use scripts list API to find ID of a corresponding script.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -u admin:foobaz -XGET &#39;http://localhost:3000/api/v1/library/scripts/4943d682-7874-4f7a-999c-b4ff5493fc3f&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>The response will be:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{\n    &quot;data&quot;: {\n        &quot;id&quot;: &quot;4943d682-7874-4f7a-999c-b4ff5493fc3f&quot;,\n        &quot;name&quot;: &quot;current directory&quot;,\n        &quot;created_by&quot;: &quot;admin&quot;,\n        &quot;created_at&quot;: &quot;2021-05-18T09:30:27+03:00&quot;,\n        &quot;interpreter&quot;: &quot;/bin/bash&quot;,\n        &quot;is_sudo&quot;: true,\n        &quot;cwd&quot;: &quot;/root&quot;,\n        &quot;script&quot;: &quot;pwd&quot;\n    }\n}\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="scripts-execution" tabindex="-1"><a class="header-anchor" href="#scripts-execution" aria-hidden="true">#</a> Scripts execution</h2><p>On the client using the <code>rport.conf</code> you can enable or disable execution of remote scripts.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[remote-scripts]\n## Enable or disable remote scripts.\n## Defaults: true\n#enabled = true\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Please note that scripts execution requires commands execution to be enabled (check https://oss.rport.io/docs/no06-command-execution.html#securing-your-environment or <code>[remote-commands]</code> enabled flag of configuration).</p><p>Similar to command execution, you can run scripts both by calling a REST or websocket interface. In all cases the scripts are executed by the following algorithm:</p><ul><li>Rport server calls each client to create a script file. The script file will get a random unique name and will be placed in the folder specified as <code>data_dir</code> from configuration + <code>scripts</code>:</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[client]\ndata_dir = &#39;/var/lib/rport/scripts&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>Rport calls the existing command API to execute the script on the target client, e.g.:</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sh /var/lib/rport/scripts/f68a779d-1d46-414a-b165-d8d2df5f348c.sh #Linux/macOS\n\ncmd C:\\Users\\me\\AppData\\Local\\Temp\\f68a779d-1d46-414a-b165-d8d2df5f348c.bat #Windows non-powershell execution\n\npowershell -executionpolicy bypass -file C:\\Users\\me\\AppData\\Local\\Temp\\f68a779d-1d46-414a-b165-d8d2df5f348c.ps1 #Windows powershell execution\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>Rport deletes the temp script file in any case disregard if script execution fails or not.</li></ul><p><strong>NOTE</strong> To execute scripts you need to allow execution of the corresponding script command (see https://oss.rport.io/docs/no06-command-execution.html#securing-your-environment)</p><h3 id="script-execution-via-rest-interface" tabindex="-1"><a class="header-anchor" href="#script-execution-via-rest-interface" aria-hidden="true">#</a> Script execution via REST interface</h3><p>To execute script on a certain client you would need a client id e.g. <code>b6b28b13-be4a-4a78-bb39-eca132c434fb</code> and an access token. The script&#39;s payload should be base64 encoded:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X POST &#39;http://localhost:3000/api/v1/clients/4943d682-7874-4f7a-999c-b4ff5493fc3f/scripts&#39; \\\n-H &#39;Authorization: Bearer eyJhbGcidfasjflInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImdfasfdjoiMTEzMzkyNjMxNTA0MDYwOTU1MCJ9.JG4whDXeDKDuZqgVA \\\n-H &#39;Content-Type: application/javascript&#39; \\\n--data-raw &#39;{\n  &quot;script&quot;: &quot;cHdkCg==&quot;,\n  &quot;timeout_sec&quot;: 60,\n  &quot;interpreter&quot;:&quot;powershell&quot;\n}&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>as a result you will get a unique job id for the executable script e.g.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{\n    &quot;data&quot;: {\n        &quot;jid&quot;: &quot;24bd86ba-1fd4-48c1-9620-6879f196b8de&quot;\n    }\n}\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>to customize script execution you can provide additional JSON fields in the request body:</p><ul><li><code>interpreter:powershell</code> to execute script with powershell under Windows</li><li><code>is_sudo:true</code> to execute script as sudo under Linux or macOS</li><li><code>cwd:/tmp/script</code> to change the default folder for the script execution</li><li><code>timeout:10s</code> to set the timeout for the corresponding script execution</li></ul><p>Here is an example of a script execution with all parameters enabled:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X POST &#39;http://localhost:3000/api/v1/clients/4943d682-7874-4f7a-999c-b4ff5493fc3f/scripts&#39; \\\n-H &#39;Authorization: Bearer eyJhbGcidfasjflInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImdfasfdjoiMTEzMzkyNjMxNTA0MDYwOTU1MCJ9.JG4whDXeDKDuZqgVA \\\n-H &#39;Content-Type: application/x-www-form-urlencoded&#39; \\\n--data-raw &#39;{\n  &quot;script&quot;: &quot;cHdkCg==&quot;,\n  &quot;interpreter&quot;: &quot;cmd&quot;,\n  &quot;cwd&quot;: &quot;string&quot;,\n  &quot;is_sudo&quot;: true,\n  &quot;timeout_sec&quot;: 60\n}&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>',55),d=(0,t.Uk)("you can check the status of the command execution by calling "),b={href:"https://petstore.swagger.io/?url=https://raw.githubusercontent.com/cloudradar-monitoring/rport/master/api-doc.yml#/Commands/get_clients__client_id__commands__job_id_",target:"_blank",rel:"noopener noreferrer"},m=(0,t.Uk)("client commands API"),h=(0,t.Uk)("."),f=(0,t.uE)('<p>You can execute a script on multiple clients by calling <code>scripts</code> API, in this case you should provide client ids in the input body:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X POST &#39;http://localhost:3000/api/scripts&#39; \\\n-H &#39;Authorization: Bearer eyJhbGcidfasjflInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImdfasfdjoiMTEzMzkyNjMxNTA0MDYwOTU1MCJ9.JG4whDXeDKDuZqgVA \\\n-H &#39;Content-Type: application/javascript&#39; \\\n--data-raw &#39;{\n  &quot;script&quot;: &quot;cHdkCg==&quot;,\n  &quot;client_ids&quot;: [\n    &quot;8e995525-b18f-44a4-ae83-f3b8fd5a5ff8&quot;,\n    &quot;eabb80c4-fa17-46e5-a965-0ea442fa0e83&quot;\n  ],\n  &quot;timeout_sec&quot;: 60,\n  &quot;execute_concurrently&quot;: false,\n  &quot;abort_on_error&quot;: true,\n  &quot;interpreter&quot;:&quot;powershell&quot;\n}&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="customizing-an-interpreter" tabindex="-1"><a class="header-anchor" href="#customizing-an-interpreter" aria-hidden="true">#</a> Customizing an interpreter</h3><p>You can specify an interpreter for the script execution. Default values are <code>/bin/sh</code> for Linux/Mac OS and <code>cmd</code> for Windows. Alternative values as <code>powershell</code> for Windows or <code>tacoscript</code> for Linux and Windows are also possible.</p><p>You can use an absolute path to a non-standard interpreters of your choice, e.g. <code>/usr/local/bin/zsh</code> or <code>C:\\Program Files\\PowerShell\\7\\pwsh.exe</code>.</p><p>For Linux or Mac OS make sure, that your non-standard interpreter supports <code>-c</code> flag which is used to provide a command to execute.</p><p>If you use a custom powershell path under Windows, e.g. <code>C:\\Program Files\\PowerShell\\7\\pwsh.exe</code>, the parameters for script execution <code>-Noninteractive -executionpolicy bypass -File</code> will be added automatically only if the path to the executable contains &quot;powershell&quot; word (case insensitive).</p><p>For fast and unified script execution with different interpreters and shells, you can specify aliases. Instead of providing the full path to the shell, sending the alias is sufficient. You can specify aliases in <code>rport.conf</code> (see <code>rport.example.conf</code>), see <code>[interpreter-aliases]</code> section. Having aliases list</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>## Examples:\n # pwsh7 = &#39;C:\\Program Files\\PowerShell\\7\\pwsh.exe&#39;\n # latestbash = &#39;C:\\Program Files\\Git\\bin\\bash.exe&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>allows you to use <code>pwsh7</code> or <code>latestbash</code> as interpreter in the script execution APIs.</p><h3 id="script-execution-via-websocket-interface" tabindex="-1"><a class="header-anchor" href="#script-execution-via-websocket-interface" aria-hidden="true">#</a> Script execution via websocket interface</h3>',11),g=(0,t.Uk)("You can use "),q={href:"https://petstore.swagger.io/?url=https://raw.githubusercontent.com/cloudradar-monitoring/rport/master/api-doc.yml#/Scripts/get_ws_scripts",target:"_blank",rel:"noopener noreferrer"},x=(0,t.Uk)("our testing API for Websockets"),v=(0,t.Uk)(". To use this API, enable testing endpoints by setting "),y=(0,t.Wm)("code",null,"enable_ws_test_endpoints",-1),w=(0,t.Uk)(" flag to true in the "),k=(0,t.Wm)("code",null,"[server]",-1),_=(0,t.Uk)(" section of configuration file:"),I=(0,t.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[server]\n...\n  enable_ws_test_endpoints = true\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Restart Rport server and go to: <code>{YOUR_RPORT_ADDRESS}/api/v1/test/scripts/ui</code></p><p>Put an access token and a client ids in the corresponding fields. You can also provide <code>interpreter</code>, <code>is_sudo</code>, <code>cwd</code>, <code>timeout</code> parameters as described above.</p><p>Click Open to start websocket connection.</p><p>Put the input data in JSON format with the base64 encoded script to the input field and click Send. The payload will be transmitted via Websocket protocol. Once the clients finish the execution, they will send back the response which you&#39;ll see in the Output field.</p><h3 id="execution-of-taco-scripts" tabindex="-1"><a class="header-anchor" href="#execution-of-taco-scripts" aria-hidden="true">#</a> Execution of taco scripts</h3>',6),T={href:"https://github.com/cloudradar-monitoring/tacoscript",target:"_blank",rel:"noopener noreferrer"},S=(0,t.Uk)("tacoscript"),W=(0,t.Uk)(" interpreter can be used to execute scripts in a Saltstack similar format for both Windows and Linux machines. Tacoscript interpreter doesn't require additional libraries or tools to be installed in the system and it has capabilities for:"),C=(0,t.uE)('<ul><li>conditional execution depending on command exit codes, present/missing files, host system information (e.g. os version)</li><li>installing/uninstalling/upgrading packages</li><li>creating files</li><li>dependant executions (e.g. script A depends on execution of script B etc)</li><li>reserved values from the information about the host system</li><li>reusable variables</li></ul><p>To execute a taco script, you need to specify <code>tacoscript</code> as an interpreter, e.g.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X POST &#39;http://localhost:3000/api/v1/clients/4943d682-7874-4f7a-999c-b4ff5493fc3f/scripts&#39; \\\n-H &#39;Authorization: Bearer eyJhbGcidfasjflInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImdfasfdjoiMTEzMzkyNjMxNTA0MDYwOTU1MCJ9.JG4whDXeDKDuZqgVA \\\n-H &#39;Content-Type: application/x-www-form-urlencoded&#39; \\\n--data-raw &#39;{\n  &quot;script&quot;: &quot;IwojIEZpcnN0IGV4YW1wbGUgb2YgYSB0YWNvc2NyaXB0IGZvbGxvd2luZyB0aGUgc3ludGF4IG9mIFNhbHQKIyBidXQgbm90IGltcGxlbWVudGluZyBhbGwgb3B0aW9ucwojIGh0dHBzOi8vZG9jcy5zYWx0c3RhY2suY29tL2VuL2xhdGVzdC9yZWYvc3RhdGVzL2FsbC9zYWx0LnN0YXRlcy5jbWQuaHRtbAojCiMgdW5pcXVlIGlkIG9mIHRoZSB0YXNrLCBjYW4gYmUgYW55IHN0cmluZwpkYXRlIGNvbW1hbmQ6CiAgY21kLnJ1bjoKICAgIC0gbmFtZXM6CiAgICAgIC0gZGF0ZQo=&quot;,\n  &quot;interpreter&quot;: &quot;tacoscript&quot;\n}&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Where the base64 encoded script looks like this:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#\n# First example of a tacoscript following the syntax of Salt\n# but not implementing all options\n# https://docs.saltstack.com/en/latest/ref/states/all/salt.states.cmd.html\n#\n# unique id of the task, can be any string\ndate command:\n  cmd.run:\n    - names:\n      - date\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>',5),Y=(0,t.Uk)("As a result this script will output the current date. In order to execute taco scripts, there should be "),A=(0,t.Wm)("code",null,"tacoscript",-1),P=(0,t.Uk)(" binary avalable in the system path (see here "),U={href:"https://github.com/cloudradar-monitoring/tacoscript#installation",target:"_blank",rel:"noopener noreferrer"},G=(0,t.Uk)("the installation instructions"),z=(0,t.Uk)(")"),D={render:function(e,s){const n=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.j4)(t.HY,null,[a,r,i,(0,t.Wm)("p",null,[o,(0,t.Wm)("a",c,[l,(0,t.Wm)(n)]),p]),u,(0,t.Wm)("p",null,[d,(0,t.Wm)("a",b,[m,(0,t.Wm)(n)]),h]),f,(0,t.Wm)("p",null,[g,(0,t.Wm)("a",q,[x,(0,t.Wm)(n)]),v,y,w,k,_]),I,(0,t.Wm)("p",null,[(0,t.Wm)("a",T,[S,(0,t.Wm)(n)]),W]),C,(0,t.Wm)("p",null,[Y,A,P,(0,t.Wm)("a",U,[G,(0,t.Wm)(n)]),z])],64)}}}}]);