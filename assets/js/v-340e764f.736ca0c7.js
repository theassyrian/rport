(self.webpackChunkrport_site=self.webpackChunkrport_site||[]).push([[848],{3082:(s,n,e)=>{"use strict";e.r(n),e.d(n,{data:()=>a});const a={key:"v-340e764f",path:"/docs/no16-update-status.html",title:"Supervising the update status (patch level)",lang:"en-DE",frontmatter:{},excerpt:"",headers:[{level:2,title:"Preface",slug:"preface",children:[]},{level:2,title:"Supported operating systems",slug:"supported-operating-systems",children:[]},{level:2,title:"Enable/disable",slug:"enable-disable",children:[]},{level:2,title:"Sudo rules",slug:"sudo-rules",children:[{level:3,title:"Debian and Ubuntu",slug:"debian-and-ubuntu",children:[]},{level:3,title:"SuSE Linux",slug:"suse-linux",children:[]}]}],filePathRelative:"docs/no16-update-status.md"}},8213:(s,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>t});const a=(0,e(6252).uE)('<h1 id="supervising-the-update-status-patch-level" tabindex="-1"><a class="header-anchor" href="#supervising-the-update-status-patch-level" aria-hidden="true">#</a> Supervising the update status (patch level)</h1><h2 id="preface" tabindex="-1"><a class="header-anchor" href="#preface" aria-hidden="true">#</a> Preface</h2><p>Starting with version 0.3 the rport client can fetch a list of pending updates for the underlying operating system. The summary is sent to the RPort server. This allows you to supervise the patch level of a large number of machines from a central place. On the RPort server API each client will contain an <code>update_status</code> object that contains data as shown in the example below.</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;updates_status&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;refreshed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-08-16T06:45:56.485091025Z&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;updates_available&quot;</span><span class="token operator">:</span> <span class="token number">109</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;security_updates_available&quot;</span><span class="token operator">:</span> <span class="token number">41</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;update_summaries&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n        <span class="token punctuation">{</span>\n        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;login 1:4.8.1-1ubuntu5.20.04.1 Ubuntu:20.04/focal-updates [amd64]&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;reboot_required&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;is_security_update&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">{</span>\n        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;libatomic1&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;libatomic1 10.3.0-1ubuntu1~20.04 Ubuntu:20.04/focal-updates, Ubuntu:20.04/focal-security [amd64]&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;reboot_required&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;is_security_update&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;reboot_pending&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="supported-operating-systems" tabindex="-1"><a class="header-anchor" href="#supported-operating-systems" aria-hidden="true">#</a> Supported operating systems</h2><p>The following operating systems are supported for the update status supervision:</p><ul><li>Ubuntu and Debian by using <code>apt-get</code></li><li>RedHat, CentOs, and derivates by using <code>yum</code> or <code>dnf</code></li><li>SuSE by using <code>zypper</code></li><li>Microsoft Windows by using the Windows Update Manager</li></ul><h2 id="enable-disable" tabindex="-1"><a class="header-anchor" href="#enable-disable" aria-hidden="true">#</a> Enable/disable</h2><p>Fetching the update status is enabled by default. In the <code>[client]</code> section, you will find a block as shown in the <code>rport.conf</code> file.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>## Supervision and reporting of the pending updates (patch level)\n## Rport can constantly summarize pending updates and\n## make that summary available on the rport server.\n## On Debian/Ubuntu and SuSE Linux sudo rules are needed.\n## https://oss.rport.io/docs/no16-update-status.html\n## How often after the rport client has started pending updates are summarized\n## Set 0 to disable.\n## Supported time units: h (hours), m (minutes)\n## Default: updates_interval = &#39;4h&#39;\n#updates_interval = &#39;4h&#39;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Setting <code>updates_interval = &#39;0&#39;</code> disables the feature. Triggering a manual refresh of the update status is prevented this way too.</p><h2 id="sudo-rules" tabindex="-1"><a class="header-anchor" href="#sudo-rules" aria-hidden="true">#</a> Sudo rules</h2><p>On some Linux distributions, only the root user is allowed to look for pending updates. Because the rport client runs with its own unprivileged users, sudo rules are needed.</p><h3 id="debian-and-ubuntu" tabindex="-1"><a class="header-anchor" href="#debian-and-ubuntu" aria-hidden="true">#</a> Debian and Ubuntu</h3><p>Create a file <code>/etc/sudoers.d/rport-update-status</code> with the following content:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>rport ALL=NOPASSWD: SETENV: /usr/bin/apt-get update -o Debug\\:\\:NoLocking=true\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="suse-linux" tabindex="-1"><a class="header-anchor" href="#suse-linux" aria-hidden="true">#</a> SuSE Linux</h3><p>Create a file <code>/etc/sudoers.d/rport-update-status</code> with the following content:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>rport ALL=NOPASSWD: SETENV: /usr/bin/zypper refresh *\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',19),t={render:function(s,n){return a}}}}]);